# K8s StatefulSet

### Output in terminal for stateful set

```
(devops) user@mbp-user k8s % kubectl get po,sts,svc,pvc
 NAME                                     READY   STATUS    RESTARTS       AGE
 pod/python-app-helm-0                    1/1     Running   0              21m
 pod/python-app-helm-1                    1/1     Running   0              21m

 NAME                                   READY   AGE
 statefulset.apps/python-app-helm       2/2     100s

 NAME                          TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)        AGE
 service/kubernetes            ClusterIP      10.96.0.1      <none>        443/TCP        26d
 service/time-web-app-python   LoadBalancer   10.107.9.80    <pending>     80:32531/TCP   21m

 NAME                                                            STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
 persistentvolumeclaim/python-volume-0                           Bound    pvc-p894a37c-651e-9375-0dh3-ce934fdca947   64Mi       RWO            standard       21m
 persistentvolumeclaim/python-volume-1                           Bound    pvc-12kd7dc1-e5cb-4014-87c5-4b94j3074459   64Mi       RWO            standard       21m
 ```

### Output for visits

```
(devops) user@mbp-user k8s % kubectl exec pod/python-app-helm-0 -- cat visits
Current Moscow Time: 14:59:33
Current Moscow Time: 14:59:44
Current Moscow Time: 15:00:01
Current Moscow Time: 15:00:02
Current Moscow Time: 15:00:02
Current Moscow Time: 15:00:02
Current Moscow Time: 15:00:11

(devops) user@mbp-user k8s % kubectl exec pod/python-app-helm-01 -- cat visits
Current Moscow Time: 14:59:35
Current Moscow Time: 14:59:58
Current Moscow Time: 15:00:03
Current Moscow Time: 15:00:11
```

App is independent of replicas, so no ordering is necessary.

In order to run pods in parallel we can simply add  
**podManagementPolicy: "Parallel"**  
property to our **values.yaml** file for both apps

# Bonus Task

### Update strategies
Name is self-descriptive, it is just ways to update the system

Main strategies are: **update rolling with AMI**, **Blue/Green** and **Scheduled downtime**